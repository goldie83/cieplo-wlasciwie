!function(e,t){t.material.init()}(window,jQuery),function(e,t){function o(){floors=parseInt(t("#calculation_building_floors").val()),"steep"==t("#calculation_building_roof").val()&&(floors+=1),console.log("floors here: "+floors),t("#calculation_building_heated_floors_0").parents(".checkbox").toggle(t("#calculation_building_has_basement").is(":checked")),t("#calculation_building_heated_floors_1").parents(".checkbox").toggle(floors>=1),t("#calculation_building_heated_floors_2").parents(".checkbox").toggle(floors>=2),t("#heated_floors label").eq(3).contents().last()[0].textContent=" 1. piętro",t("#calculation_building_heated_floors_3").parents(".checkbox").toggle(floors>=3),t("#heated_floors label").eq(4).contents().last()[0].textContent=" 2. piętro",t("#calculation_building_heated_floors_4").parents(".checkbox").toggle(floors>=4),t("#heated_floors label").eq(5).contents().last()[0].textContent=" 3. piętro",t("#calculation_building_heated_floors_5").parents(".checkbox").toggle(floors>=5),t("#heated_floors label").eq(6).contents().last()[0].textContent=" 4. piętro",t("#calculation_building_heated_floors_6").parents(".checkbox").toggle(floors>=6),t("#heated_floors label").eq(7).contents().last()[0].textContent=" 5. piętro","steep"==t("#calculation_building_roof").val()&&(t("#heated_floors label:visible").last().contents().last()[0].textContent=" Poddasze"),t("#heated_floors label:hidden").each(function(){t(this).children("input").prop("checked",!1)})}function a(e){var o=t("#house_preview").width(),a=t("#house_preview").height();e&&t("#house_preview").empty(),e=Raphael("house_preview",o,a),e.setViewBox(0,0,o,a,!0),e.setSize("100%","100%");var l="#FFAC4D",n="#E8FFA7",r=.75*a,i=.25*a,s=.9*r,c=1.2*s,f=o/2,d=parseInt(t("#calculation_building_floors").val())+1,_=t("#calculation_building_roof").val(),h=t("#calculation_building_has_basement").is(":checked"),u=t("#heated_floors input:checked").map(function(){return parseInt(this.value)}).get();e.rect(0,0,o,r,0).attr({fill:"#5ECAF1",stroke:"none"}),e.rect(0,r,o,i,0).attr({fill:"#BE5052",stroke:"none"});var g=d>3?.05*r:.2*r,b=(r-g)/d,x=2*(f-(f-.33*c));if("steep"==_){isFloorHeated=-1!=u.indexOf(d),console.log("total: "+d),console.log(u),heatedText=isFloorHeated?"ogrzewane":"nieogrzewane",F=isFloorHeated?l:n;var p=e.path("M "+f+" "+g+" L "+(f-.4*c)+" "+(g+b)+" L "+(f+.4*c)+" "+(g+b)+" L "+f+" "+g);p.attr("fill","#ff0000");var v=e.path("M "+f+" "+(g+.05*b)+" L "+(f-.4*c+.05*c)+" "+(g+.95*b)+" L "+(f+.4*c-.05*c)+" "+(g+.95*b)+" L "+f+" "+(g+.05*b));v.attr("fill",F);var w=e.text(f,g+.5*b,"Poddasze").attr({fill:"#000"});w.attr({"font-size":14,"font-weight":"bold"});var k=e.text(f,g+.5*b+10,heatedText).attr({fill:"#000"});k.attr({"font-size":12})}else{e.rect(f-.4*c,g+.9*b,.8*c,.1*b,0).attr({fill:"#777",stroke:"none"}),e.rect(f-.35*c,g+.8*b,.7*c,.1*b,0).attr({fill:"#222",stroke:"none"})}console.log("verticalMargin: "+g+", floorHeight: "+b);var z=["Piwnica","Parter","1. piętro","2. piętro","3. piętro","4. piętro","5. piętro"];for(floorIndex=1;floorIndex<d;floorIndex++){reversedFloorIndex=d-floorIndex,isFloorHeated=-1!=u.indexOf(reversedFloorIndex),floorName=z[reversedFloorIndex],"Parter"==floorName?heatedText=isFloorHeated?"ogrzewany":"nieogrzewany":heatedText=isFloorHeated?"ogrzewane":"nieogrzewane",F=isFloorHeated?l:n;var F=(e.rect(f-.33*c,g+floorIndex*b,x,b,0).attr({fill:"#777",stroke:"none"}),e.rect(f-.33*c+10,g+floorIndex*b+5,x-20,b-10,0).attr({fill:F,stroke:"none"})),H=e.text(f,g+(floorIndex+.4)*b,floorName).attr({fill:"#000"});H.attr({"font-size":16,"font-weight":"bold"});var H=e.text(f,g+(floorIndex+.4)*b+15,heatedText).attr({fill:"#000"});H.attr({"font-size":14})}if(h){isFloorHeated=-1!=u.indexOf(0),F=isFloorHeated?l:n,heatedText=isFloorHeated?"ogrzewana":"nieogrzewana",basementHeight=Math.min(1.5*b,.8*i);var I=(e.rect(f-.33*c,r,x,basementHeight,0).attr({fill:"#777",stroke:"none"}),e.rect(f-.33*c+10,r+5,x-20,basementHeight-15,0).attr({fill:F,stroke:"none"}),e.text(f,r+.3*i,"Piwnica").attr({fill:"#000"}));I.attr({"font-size":16,"font-weight":"bold"});var I=e.text(f,r+.3*i+15,heatedText).attr({fill:"#000"});I.attr({"font-size":14})}else{var m=e.text(f,r+20,"bez podpiwniczenia").attr({fill:"#fff"});m.attr({"font-size":14,"font-weight":"bold"})}}t("#calculation_building_shape").change(function(){t("#contour_free_area").toggle("regular"!=t(this).val())}),t("#calculation_has_area_0").on("click",function(){t("#has_area_no").hide(),t("#calculation_area").val(""),t("#has_area_yes").show()}),t("#calculation_has_area_1").on("click",function(){t("#has_area_yes").hide(),t("#calculation_building_shape").val("regular"),t("#calculation_building_length").val(""),t("#calculation_building_width").val(""),t("#calculation_building_contour_free_area").val(""),t("#contour_free_area").hide(),t("#has_area_no").show()}),o();var l=null;t("#calculation_building_floors").on("change",function(e){o(),a(e)}),t("#calculation_building_roof").on("change",function(e){o(),a(e)}),t("#calculation_building_has_basement").on("change",function(e){o(),a(e)}),t("#heated_floors").on("change",function(e){a(e)}),a(l)}(window,jQuery);