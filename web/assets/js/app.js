!function(e,t){t.material.init()}(window,jQuery),function(e,t){function a(){var e=t("#calculation_area").val()>0||t("#calculation_building_width").val()>0&&t("#calculation_building_length").val()>0,a=0;t("#calculation_area").val()>0?(fakeEdge=Math.sqrt(t("#calculation_area").val())-.8,a=fakeEdge*fakeEdge):a=(t("#calculation_building_width").val()-.8)*(t("#calculation_building_length").val()-.8)-t("#calculation_building_contour_free_area").val();var o=t("#heated_floors input:checked").size()*a,l=(t("#heated_floors label:visible").size()-1)*a;t("#heated_area").text(parseInt(o)),t("#total_area").text(parseInt(l)),t("#area_preview").toggle(e)}function o(){floors=parseInt(t("#calculation_building_floors").val()),"steep"==t("#calculation_building_roof").val()&&(floors+=1),t("#calculation_building_heated_floors_0").parents(".checkbox").toggle(t("#calculation_has_basement").is(":checked")),t("#calculation_building_heated_floors_1").parents(".checkbox").toggle(floors>=1),t("#calculation_building_heated_floors_2").parents(".checkbox").toggle(floors>=2),t("#heated_floors label").eq(3).contents().last()[0].textContent=" 1. piętro",t("#calculation_building_heated_floors_3").parents(".checkbox").toggle(floors>=3),t("#heated_floors label").eq(4).contents().last()[0].textContent=" 2. piętro",t("#calculation_building_heated_floors_4").parents(".checkbox").toggle(floors>=4),t("#heated_floors label").eq(5).contents().last()[0].textContent=" 3. piętro",t("#calculation_building_heated_floors_5").parents(".checkbox").toggle(floors>=5),t("#heated_floors label").eq(6).contents().last()[0].textContent=" 4. piętro",t("#calculation_building_heated_floors_6").parents(".checkbox").toggle(floors>=6),t("#heated_floors label").eq(7).contents().last()[0].textContent=" 5. piętro","steep"==t("#calculation_building_roof").val()&&(t("#heated_floors label:visible").last().contents().last()[0].textContent=" Poddasze"),t("#heated_floors label:hidden").each(function(){t(this).children("input").prop("checked",!1)})}function l(e){var a=t("#house_preview").width(),o=t("#house_preview").height();e&&t("#house_preview").empty(),e=Raphael("house_preview",a,o),e.setViewBox(0,0,a,o,!0),e.setSize("100%","100%");var l="#FFAC4D",n="#E8FFA7",i=.75*o,r=.25*o,c=.9*i,s=1.2*c,_=a/2,d=parseInt(t("#calculation_building_floors").val())+1,f=t("#calculation_building_roof").val(),u=t("#calculation_has_basement").is(":checked"),h=t("#heated_floors input:checked").map(function(){return parseInt(this.value)}).get();e.rect(0,0,a,i,0).attr({fill:"#5ECAF1",stroke:"none"}),e.rect(0,i,a,r,0).attr({fill:"#BE5052",stroke:"none"});var g=d>3?.05*i:.2*i,b=(i-g)/d,p=2*(_-(_-.33*s));if("steep"==f){isFloorHeated=-1!=h.indexOf(d),heatedText=isFloorHeated?"ogrzewane":"nieogrzewane",F=isFloorHeated?l:n;var v=e.path("M "+_+" "+g+" L "+(_-.4*s)+" "+(g+b)+" L "+(_+.4*s)+" "+(g+b)+" L "+_+" "+g);v.attr("fill","#ff0000");var x=e.path("M "+_+" "+(g+.05*b)+" L "+(_-.4*s+.05*s)+" "+(g+.95*b)+" L "+(_+.4*s-.05*s)+" "+(g+.95*b)+" L "+_+" "+(g+.05*b));x.attr("fill",F);var w=e.text(_,g+.5*b,"Poddasze").attr({fill:"#000"});w.attr({"font-size":14,"font-weight":"bold"});var k=e.text(_,g+.5*b+10,heatedText).attr({fill:"#000"});k.attr({"font-size":12})}else{e.rect(_-.4*s,g+.9*b,.8*s,.1*b,0).attr({fill:"#777",stroke:"none"}),e.rect(_-.35*s,g+.8*b,.7*s,.15*b,0).attr({fill:"#222",stroke:"none"})}var z=["Piwnica","Parter","1. piętro","2. piętro","3. piętro","4. piętro","5. piętro"];for(floorIndex=1;floorIndex<d;floorIndex++){reversedFloorIndex=d-floorIndex,isFloorHeated=-1!=h.indexOf(reversedFloorIndex),floorName=z[reversedFloorIndex],"Parter"==floorName?heatedText=isFloorHeated?"ogrzewany":"nieogrzewany":heatedText=isFloorHeated?"ogrzewane":"nieogrzewane",F=isFloorHeated?l:n;var F=(e.rect(_-.33*s,g+floorIndex*b,p,b,0).attr({fill:"#777",stroke:"none"}),e.rect(_-.33*s+10,g+floorIndex*b+5,p-20,b-10,0).attr({fill:F,stroke:"none"})),I=e.text(_,g+(floorIndex+.4)*b,floorName).attr({fill:"#000"});I.attr({"font-size":16,"font-weight":"bold"});var I=e.text(_,g+(floorIndex+.4)*b+15,heatedText).attr({fill:"#000"});I.attr({"font-size":14})}if(u){isFloorHeated=-1!=h.indexOf(0),F=isFloorHeated?l:n,heatedText=isFloorHeated?"ogrzewana":"nieogrzewana",basementHeight=Math.min(1.5*b,.8*r);var m=(e.rect(_-.33*s,i,p,basementHeight,0).attr({fill:"#777",stroke:"none"}),e.rect(_-.33*s+10,i+5,p-20,basementHeight-15,0).attr({fill:F,stroke:"none"}),e.text(_,i+.3*r,"Piwnica").attr({fill:"#000"}));m.attr({"font-size":16,"font-weight":"bold"});var m=e.text(_,i+.3*r+15,heatedText).attr({fill:"#000"});m.attr({"font-size":14})}else{var H=e.text(_,i+20,"bez podpiwniczenia").attr({fill:"#fff"});H.attr({"font-size":14,"font-weight":"bold"})}}t("#calculation_area").change(function(){a()}),t("#calculation_building_width").change(function(){a()}),t("#calculation_building_length").change(function(){a()}),t("#calculation_building_length").change(function(){a()}),t("#calculation_building_contour_free_area").change(function(){a()}),t("#calculation_building_shape").change(function(){t("#contour_free_area").toggle("regular"!=t(this).val())}),t("#calculation_has_area_0").on("click",function(){t("#has_area_no").hide(),t("#contour_explanation").hide(),t("#calculation_building_shape").val("regular"),t("#calculation_building_length").val(""),t("#calculation_building_width").val(""),t("#calculation_building_contour_free_area").val(""),t("#contour_free_area").hide(),t("#has_area_yes").show()}),t("#calculation_has_area_1").on("click",function(){t("#has_area_yes").hide(),t("#calculation_area").val(""),t("#contour_explanation").show(),t("#has_area_no").show()}),o(),a();var n=null;t("#calculation_building_floors").on("change",function(e){o(),a(),l(e)}),t("#calculation_building_roof").on("change",function(e){o(),a(),l(e)}),t("#calculation_has_basement").on("change",function(e){o(),a(),l(e)}),t("#heated_floors").on("change",function(e){a(),l(e)}),l(n)}(window,jQuery);