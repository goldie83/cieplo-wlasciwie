{% extends 'KrakenRankingBundle::base.html.twig' %}

{% block title %}{{ boiler.name }} - ranking kotłów węglowych{% endblock title %}

{% block headline %}{{ boiler.name }}{% endblock headline %}

{% block content_row %}
<div class="row">
    <div class="col-sm-4">
        <div class="thumbnail">
            <img src="{{ vich_uploader_asset(boiler, 'imageFile') }}" />
        </div>
        <table class="table table-striped">
          <tbody>
            <tr>
              <th scope="row">Ocena w rankingu</th>
              <td><span class="label label-primary boiler-class {{ boiler.rating|lower }}-class">{{ boiler.rating }}</span></td>
            </tr>
            <tr>
              <th scope="row">Producent</th>
              <td>{{ boiler.manufacturer }}</td>
            </tr>
            <tr>
              <th scope="row">Rodzaj kotła</th>
              <td>{{ boiler.category.singularName }}</td>
            </tr>
            <tr>
              <th scope="row">Powierzchnia wymiennika</th>
              <td><strong>{{ boiler.exchangerNormPercent }}%</strong> współczesnego standardu</td>
            </tr>
            <tr>
              <th scope="row">Do układu zamkniętego</th>
              <td><strong>{{ boiler.forClosedSystem ? 'tak' : 'nie' }}</strong></td>
            </tr>
            <tr>
              <th scope="row">Paliwa</th>
              <td>
                  <ul>
                  {% for fuel in boiler.acceptedFuelTypes %}
                      <li>{{ fuel }}</li>
                  {% endfor %}
                  </ul>
              </td>
            </tr>
            <tr>
              <th scope="row">Dostępne moce</th>
              <td>
                  {% for power in boiler.boilerPowers %}
                      <span class="label label-primary boiler-power">{{ power.power|number_format }}kW</span>
                  {% endfor %}
              </td>
            </tr>
            <tr>
              <th scope="row">
                  Klasa<br/><small><a href="http://czysteogrzewanie.pl/kociol/ranking-kotlow-weglowych/norma-pn-en-303-5-2012/" target="_blank">wg normy <span style="white-space:nowrap">PN-EN 303-5:2012</span></a></small></th>
              <td>
                  {% if boiler.normClass %}
                      {{ boiler.normClass }}
                  {% else %}
                      <i>nie przebadano</i>
                  {% endif %}
              </td>
            </tr>
            <tr>
              <th scope="row">Gwarancja</th>
              <td>{{ boiler.warrantyYears }}</td>
            </tr>
            <tr>
              <th scope="row">Instrukcja obsługi</th>
              <td>{% if boiler.userManual %}<a href="{{ boiler.userManual }}" target="_blank">dostępna</a>{% else %}<i>niedostępna</i>{% endif %}</td>
            </tr>
            <tr>
              <th scope="row">Orientacyjna cena</th>
              <td>od {{ boiler.typicalModelPrice|number_format(0, ',', ' ') }}zł ({{ boiler.typicalModelPower|number_format }}kW)</td>
            </tr>
          </tbody>
        </table>
        <p>Ostatnia aktualizacja: {{ boiler.updated|date('d.m.Y') }}</p>
    </div>
    <div class="col-sm-8">
        <ul id="boilerTabs" class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#overview" id="overview-tab" role="tab" data-toggle="tab" aria-controls="overview" aria-expanded="true">Podsumowanie</a></li>
              <li role="presentation" class=""><a href="#details" role="tab" id="details-tab" data-toggle="tab" aria-controls="details" aria-expanded="false">Szczegóły</a></li>
              <li role="presentation" class=""><a href="#rating" role="tab" id="rating-tab" data-toggle="tab" aria-controls="rating" aria-expanded="false">Ocena</a></li>
        </ul>
        <div id="boilerTabsContent" class="tab-content">
          <div role="tabpanel" class="tab-pane fade active in" id="overview" aria-labelledby="overview-tab">
              {{ boiler.lead|raw }}
              <hr/>
              {% set hasUnknownProperties = boiler.unknownBoilerProperties|length > 0 %}
              <div class="col-sm-{{ hasUnknownProperties ? '4' : '6' }}">
                  <h4>Zalety</h4>
                  <ul class="list-group">
                  {% for bp in boiler.positiveBoilerProperties %}
                    <li class="list-group-item list-group-item-success">
                        <h5><strong>{{ bp.property.label }}</strong></h5>
                        <p>{{ bp.property.content }}</p>
                    </li>
                  {% endfor %}
                  </ul>
              </div>
              {% if hasUnknownProperties %}
              <div class="col-sm-4">
                  <h4>Niewiadome</h4>
                  <ul class="list-group">
                  {% for bp in boiler.unknownBoilerProperties %}
                    <li class="list-group-item">
                        <h5><strong>{{ bp.property.label }}</strong></h5>
                        <p>{{ bp.property.content }}</p>
                    </li>
                  {% endfor %}
                  </ul>
              </div>
              {% endif %}
              <div class="col-sm-{{ hasUnknownProperties ? '4' : '6' }}">
                  <h4>Wady</h4>
                  <ul class="list-group">
                  {% for bp in boiler.negativeBoilerProperties %}
                    <li class="list-group-item list-group-item-danger">
                        <h5><strong>{{ bp.property.label }}</strong></h5>
                        <p>{{ bp.property.content }}</p>
                    </li>
                  {% endfor %}
                  </ul>
              </div>
          </div>
          <div role="tabpanel" class="tab-pane fade" id="details" aria-labelledby="details-tab">
              <h2>Detale techniczne</h2>
              {% if boiler.hasCrossSectionImage %}
              <div class="thumbnail">
                  <img src="{{ vich_uploader_asset(boiler, 'crossSectionFile') }}" />
                  <div class="caption text-center">
                      <p>Przekrój kotła {{ boiler.name }}</p>
                  </div>
              </div>
              {% endif %}
              {{ boiler.content|raw }}
          </div>
          <div role="tabpanel" class="tab-pane fade" id="rating" aria-labelledby="rating-tab">
              <h2>Uzasadnienie oceny</h2>
              {{ boiler.ratingExplanation|raw }}
              {% if boiler.changes %}
                  <h3>Historia zmian</h3>
                  <dl>
                  {% for change in boiler.changes %}
                      <dt>{{ change.date|date('d.m.Y') }}: {{ change.content }}</dt>
                      <dd>{% if change.oldRating %}Zmiana oceny: <strong>{{ change.oldRating }}</strong> &rarr; <strong>{{ change.newRating }}</strong>{% else %}Ocena bez zmian.{% endif %}</dd>
                  {% endfor %}
                  </dl>
               {% endif %}
          </div>
        </div>
    </div>
</div>
{% endblock content_row %}

{% block bottom_javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/krakenranking/js/boiler.js') }}"></script>
{% endblock %}
